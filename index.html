<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Symbiotic Runner</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: #00ff66cc; /* faded neon green */
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }
    h1 {
      font-size: 2.5rem;
      margin: 10px;
      color: black;
    }
    #gameContainer {
      position: relative;
      width: 100%;
      max-width: 800px;
      height: 400px;
      border: 3px solid black;
      background: white;
      overflow: hidden;
    }
    #player {
      position: absolute;
      bottom: 0;
      left: 50px;
      width: 30px;
      height: 30px;
      background: black;
    }
    .obstacle {
      position: absolute;
      bottom: 0;
      width: 30px;
      height: 30px;
      background: red;
    }
    #score, #highScore {
      margin: 5px;
      font-size: 1.2rem;
    }
    #restartBtn {
      display: none;
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 1rem;
      cursor: pointer;
    }
    #usernameInput {
      margin: 10px;
      padding: 5px;
      font-size: 1rem;
    }
    #startBtn {
      margin: 10px;
      padding: 8px 16px;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Symbiotic Runner üèÉ‚Äç‚ôÇÔ∏è</h1>
  <input type="text" id="usernameInput" placeholder="Enter username">
  <button id="startBtn">Start Game</button>
  <div id="gameContainer">
    <div id="player"></div>
  </div>
  <div id="score">Score: 0</div>
  <div id="highScore">High Score: 0</div>
  <button id="restartBtn">Restart</button>

  <script>
    const player = document.getElementById("player");
    const gameContainer = document.getElementById("gameContainer");
    const scoreDisplay = document.getElementById("score");
    const highScoreDisplay = document.getElementById("highScore");
    const restartBtn = document.getElementById("restartBtn");
    const startBtn = document.getElementById("startBtn");
    const usernameInput = document.getElementById("usernameInput");

    let username = "";
    let isJumping = false;
    let gravity = 0.9;
    let jumpHeight = 0;
    let score = 0;
    let highScore = 0;
    let gameInterval;
    let obstacleInterval;
    let obstacleSpeed = 4;
    let spawnRate = 2000;

    function startGame() {
      username = usernameInput.value.trim();
      if (!username) {
        alert("Please enter a username to play!");
        return;
      }
      startBtn.style.display = "none";
      usernameInput.style.display = "none";
      restartBtn.style.display = "none";
      score = 0;
      scoreDisplay.textContent = "Score: 0";
      gameInterval = setInterval(updateGame, 20);
      obstacleInterval = setInterval(createObstacle, spawnRate);
    }

    function jump() {
      if (isJumping) return;
      isJumping = true;
      let upInterval = setInterval(() => {
        if (jumpHeight >= 150) {
          clearInterval(upInterval);
          let downInterval = setInterval(() => {
            if (jumpHeight <= 0) {
              clearInterval(downInterval);
              isJumping = false;
            }
            jumpHeight -= 5;
            player.style.bottom = jumpHeight + "px";
          }, 20);
        }
        jumpHeight += 5;
        player.style.bottom = jumpHeight + "px";
      }, 20);
    }

    function createObstacle() {
      const obstacle = document.createElement("div");
      obstacle.classList.add("obstacle");
      obstacle.style.left = "800px";
      gameContainer.appendChild(obstacle);

      let moveInterval = setInterval(() => {
        let playerRect = player.getBoundingClientRect();
        let obstacleRect = obstacle.getBoundingClientRect();

        // collision check
        if (
          playerRect.right > obstacleRect.left &&
          playerRect.left < obstacleRect.right &&
          playerRect.bottom > obstacleRect.top
        ) {
          gameOver();
          clearInterval(moveInterval);
        }

        let obstacleLeft = parseInt(obstacle.style.left);
        if (obstacleLeft <= -30) {
          obstacle.remove();
          score++;
          scoreDisplay.textContent = "Score: " + score;

          // difficulty scaling
          if (score % 5 === 0 && obstacleSpeed < 10) {
            obstacleSpeed += 0.5;
          }
          if (score % 10 === 0 && spawnRate > 800) {
            clearInterval(obstacleInterval);
            spawnRate -= 200;
            obstacleInterval = setInterval(createObstacle, spawnRate);
          }
        } else {
          obstacle.style.left = obstacleLeft - obstacleSpeed + "px";
        }
      }, 20);
    }

    function updateGame() {
      // continuous game updates can go here if needed
    }

    function gameOver() {
      clearInterval(gameInterval);
      clearInterval(obstacleInterval);
      if (score > highScore) {
        highScore = score;
        highScoreDisplay.textContent = "High Score (" + username + "): " + highScore;
      }
      restartBtn.style.display = "inline-block";
    }

    restartBtn.addEventListener("click", () => {
      document.querySelectorAll(".obstacle").forEach(o => o.remove());
      obstacleSpeed = 4;
      spawnRate = 2000;
      startGame();
    });

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space" || e.code === "ArrowUp") {
        jump();
      }
    });

    startBtn.addEventListener("click", startGame);
  </script>
</body>
</html>
